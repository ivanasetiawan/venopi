{
  "name": "magic-string-extra",
  "version": "0.1.2",
  "description": "Extended magic-string with extra utilities",
  "keywords": [
    "magic-string",
    "sourcemap"
  ],
  "homepage": "https://github.com/antfu/magic-string-extra#readme",
  "bugs": {
    "url": "https://github.com/antfu/magic-string-extra/issues"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/antfu/magic-string-extra.git"
  },
  "funding": "https://github.com/sponsors/antfu",
  "license": "MIT",
  "author": "Anthony Fu <anthonyfu117@hotmail.com>",
  "sideEffects": false,
  "exports": {
    ".": {
      "require": "./dist/index.cjs",
      "import": "./dist/index.mjs",
      "types": "./dist/index.d.ts"
    }
  },
  "main": "./dist/index.cjs",
  "module": "./dist/index.mjs",
  "types": "./dist/index.d.ts",
  "files": [
    "dist"
  ],
  "dependencies": {
    "magic-string": "^0.25.7"
  },
  "devDependencies": {
    "@antfu/eslint-config": "^0.16.1",
    "@antfu/ni": "^0.13.2",
    "@rollup/plugin-commonjs": "^21.0.2",
    "@rollup/plugin-json": "^4.1.0",
    "@rollup/plugin-node-resolve": "^13.1.3",
    "@types/node": "^17.0.21",
    "bumpp": "^7.1.1",
    "eslint": "^8.10.0",
    "esno": "^0.14.1",
    "rimraf": "^3.0.2",
    "rollup": "^2.68.0",
    "rollup-plugin-dts": "^4.1.0",
    "rollup-plugin-esbuild": "^4.8.2",
    "typescript": "^4.5.5",
    "vite": "^2.8.4",
    "vitest": "^0.5.7"
  },
  "scripts": {
    "build": "rimraf dist && rollup -c",
    "dev": "rollup -c -w",
    "lint": "eslint --ext .js,.ts .",
    "release": "bumpp --commit --push --tag && pnpm publish",
    "start": "esno src/index.ts",
    "test": "vitest"
  },
  "readme": "# magic-string-extra\n\n[![NPM version](https://img.shields.io/npm/v/magic-string-extra?color=a1b858&label=)](https://www.npmjs.com/package/magic-string-extra)\n\nExtended [Rich-Harris/magic-string](https://github.com/Rich-Harris/magic-string) with extra utilities.\n\n## Install\n\n```bash\nnpm i magic-string-extra\n```\n\n`magic-string-extra` can be a drop-in replacement for `magic-string`:\n\n```diff\n- import MagicString from 'magic-string'\n+ import MagicString from 'magic-string-extra'\n```\n\n## Extra Utils\n\nCheck [`magic-string`](https://github.com/Rich-Harris/magic-string)'s documentation for the base utils.\n\n### `.replace()`\n\nShares the same signature as [`String.prototype.replace`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace). Supports RegExp and replacer functions.\n\n```ts\nimport MagicString from 'magic-string-extra'\n\nconst s = new MagicString(source)\n\ns.replace(foo, 'bar')\ns.replace(/foo/g, 'bar')\ns.replace(/(\\w)(\\d+)/g, (_, $1, $2) => $1.toUpperCase() + $2)\n```\n\nThe differences between `String.replace`:\n- It will always match against the **original string**\n- It mutates the magic string state (use `.clone()` to be immutable)\n\n### `.hasChanged()`\n\nIn some cases, when the string does not change you might be able to skip the sourcemap generation to improve the performance (e.g. Rollup and Vite's transform hook). This function allows you to check the state without tracking it externally.\n\n```ts\nimport MagicString from 'magic-string-extra'\n\nconst s = new MagicString(source)\n\ns.hasChanged() // false\n\ns.prepend('foo')\n\ns.hasChanged() // true\n```\n\n### `.toRollupResult()`\n\nIt's common to use the magic string for code transformations in plugins. This function provides a shorthand to generate the result in Rollup's `TransformResult` format. When the string has not changed, `null` will be returned skip the Rollup transformation.\n\n```ts\nimport MagicString from 'magic-string-extra'\n\nconst s = new MagicString(source)\n\ns.toRollupResult() // { code, map } | null\n```\n\n## Included Upstream PRs\n\n- [#183 - fix(types): mark MagicString options as optional](https://github.com/Rich-Harris/magic-string/pull/183)\n- [#179 - docs: add TSDoc](https://github.com/Rich-Harris/magic-string/pull/179)\n\n## Sponsors\n\n<p align=\"center\">\n  <a href=\"https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg\">\n    <img src='https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg'/>\n  </a>\n</p>\n\n## License\n\n[MIT](./LICENSE) License Â© 2022 [Anthony Fu](https://github.com/antfu)\n"
}